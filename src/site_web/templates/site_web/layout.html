{% load static %}

<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Antares {% block title %}{% endblock %}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- Splide JS et CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/css/splide.min.css">
  <script src="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/js/splide.min.js"></script>

  <style>
    :root {
      --secondary-blue: #2D76B6;
      --light-gray: #F4F4F9;
      --dark-gray: #333333;
      --light-blue: #E6F0FA; 
      --accent-orange: #FA8301;
      --primary-blue: #0A4B8C;
    }
    
    body {
      font-family: 'Montserrat', sans-serif;
      background-color: var(--light-gray);
      color: var(--dark-gray);
      line-height: 1.6;
    }
    
    .navbar {
      background-color: white;
      box-shadow: 0 2px 15px rgba(13, 59, 102, 0.1);
      border-bottom: 2px solid var(--light-blue);
    }
    
    .navbar-logo {
        height: 50px;
        width: auto;
        transition: all 0.3s ease;
    }
    
    .nav-link {
        font-weight: 700;
        padding: 10px 20px;
        font-size: 1.3rem;
        transition: all 0.3s ease;
        color: var(--primary-blue) !important;
    }
    
    .navbar-brand {
        margin-right: auto;
        font-size: 1.8rem; 
    }
    
    .nav-link:hover,
    .nav-link:focus {
      color: var(--accent-orange) !important;
    }
    
    .dropdown-toggle::after {
      border-top-color: var(--primary-blue);
    }
    
    /* Style amélioré pour le bouton de connexion */
    .btn-orange {
      background-color: var(--accent-orange);
      color: white;
      border: none;
      font-weight: 500;
      padding: 8px 20px;
      border-radius: 6px;
      transition: all 0.3s ease;
    }
    
    .btn-orange:hover {
      background-color: #e0552e;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(244, 96, 54, 0.3);
    }
    
    .btn-outline-orange {
      border: 2px solid var(--accent-orange);
      color: var(--accent-orange);
      background: transparent;
      font-weight: 500;
      padding: 8px 20px;
      border-radius: 6px;
      transition: all 0.3s ease;
    }
    
    .btn-outline-orange:hover {
      background-color: var(--accent-orange);
      color: white;
    }
    
    footer {
      background-color: var(--primary-blue);
      color: white;
      padding: 30px 0;
      margin-top: 1px;
    }
    
    footer p {
      margin-bottom: 0;
    }
    
    .container {
      max-width: 1200px;
    }
    
    .navbar-container {
      display: flex;
      width: 100%;
      align-items: center;
    }
    
    .navbar-links-container {
      flex-grow: 1;
      display: flex;
      justify-content: center;
    }
    
    .navbar-auth-container {
      margin-left: auto;
    }
    
    /* Styles pour l'avatar utilisateur */
    .user-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid var(--accent-orange);
    }
    
    .user-menu .dropdown-toggle::after {
      display: none;
    }
    
    /* Effets de transition */
    a, button, .card {
      transition: all 0.3s ease;
    }
    
    input[type="email"]::placeholder {
      color: #999;
    }
    
    form input:focus {
      box-shadow: none;
      border-color: var(--accent-orange);
    }
    
    /* Style personnalisé pour le dropdown Espaces */
    .dropdown-menu {
      min-width: 280px;
      border: 1px solid rgba(0,0,0,0.1);
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    
    .dropdown-item {
      padding: 0.5rem 1rem;
      transition: all 0.2s;
    }
    
    .dropdown-item:hover {
      background-color: rgba(13, 59, 102, 0.05);
    }
    
    .dropdown-item .text-muted {
      font-size: 0.8em;
    }
    
    .nav-item.dropdown.list-unstyled {
      list-style: none;
    }
    
    @media (max-width: 991.98px) {
      .navbar-brand {
        margin-right: auto;
      }
      
      .navbar-toggler {
        margin-left: auto;
      }
      
      .navbar-collapse {
        background-color: white;
        padding: 20px;
        border-radius: 0 0 10px 10px;
        box-shadow: 0 10px 20px rgba(13, 59, 102, 0.1);
      }
      
      .navbar-logo {
        height: 45px;
      }
      
      .nav-link {
        font-size: 1rem;
        padding: 8px 15px;
      }
      
      .nav-item {
        border-bottom: 1px solid var(--light-blue);
      }
      
      .nav-item:last-child {
        border-bottom: none;
      }
      
      .navbar-toggler {
        border-color: var(--primary-blue);
      }
      
      .navbar-toggler-icon {
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%2813, 59, 102, 1%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
      }
      
      .dropdown-menu {
        border: none;
        box-shadow: none;
      }
    }
  </style>
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark sticky-top">
    <div class="container navbar-container">
      <!-- Logo à gauche -->
      <a class="navbar-brand" href="{% url 'home' %}">
        <img src="{% static 'site_web/images/hero/logo_antares_centre.png' %}" 
             alt="Logo Antares" 
             loading="lazy"
             class="navbar-logo">
      </a>

      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>

      <!-- Liens de navigation centrés -->
      <div class="collapse navbar-collapse" id="navbarNav">
        <div class="navbar-links-container">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link" href="{% url 'home' %}">Accueil</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'about' %}">À propos</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'services' %}">Nos services</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'jobs' %}">Offres d'emploi</a>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarEspaces" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                Espaces
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarEspaces">
                <li>
                  <a class="dropdown-item d-flex align-items-center" href="{% url 'candidate-registry' %}">
                    <i class="bi bi-person-vcard me-2 text-primary-blue"></i>
                    <div>
                      <div class="fw-bold">Candidat</div>
                      <small class="text-muted">Postuler aux offres</small>
                    </div>
                  </a>
                </li>
                <li><hr class="dropdown-divider"></li>
                <li>
                  <a class="dropdown-item d-flex align-items-center" href="{% url 'entreprise-registry' %}">
                    <i class="bi bi-building me-2 text-primary-blue"></i>
                    <div>
                      <div class="fw-bold">Entreprise</div>
                      <small class="text-muted">Gestion RH complète</small>
                    </div>
                  </a>
                </li>
                <li><hr class="dropdown-divider"></li>
                <li>
                  <a class="dropdown-item d-flex align-items-center" href="{% url 'consultant-info' %}">
                    <i class="bi bi-person-badge me-2 text-primary-blue"></i>
                    <div>
                      <div class="fw-bold">Consultant</div>
                      <small class="text-muted">Intégrer notre réseau</small>
                    </div>
                  </a>
                </li>
              </ul>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'contact' %}">Contact</a>
            </li>
          </ul>
        </div>

        <!-- Bouton Se connecter ou menu utilisateur -->
        <div class="navbar-auth-container">
          <ul class="navbar-nav">
            {% if user.is_authenticated %}
            <!-- Utilisateur connecté -->
            <li class="nav-item dropdown list-unstyled user-menu">
              <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                <img src="{% if user.photo %}{{ user.photo.url }}{% else %}{% static 'images/default-avatar.jpg' %}{% endif %}" 
                     class="user-avatar me-2" alt="Avatar">
                <span class="d-none d-md-inline">{{ user.first_name }}</span>
              </a>
              <ul class="dropdown-menu dropdown-menu-end">
                <li class="dropdown-header">
                  <div class="fw-bold">{{ user.get_full_name }}</div>
                  <small class="text-muted">{{ user.email }}</small>
                </li>
                <li><hr class="dropdown-divider"></li>
                
                {% if user.role == 'candidat' %}
                <li><a class="dropdown-item" href="{% url 'dashboard_candidat' %}">
                  <i class="bi bi-speedometer2 me-2"></i> Tableau de bord
                </a></li>
                <li><a class="dropdown-item" href="{% url 'edit_profil' %}">
                  <i class="bi bi-person-circle me-2"></i> Mon profil
                </a></li>
                {% elif user.role == 'entreprise' %}
                <li><a class="dropdown-item" href="{% url 'dashboard-client' %}">
                  <i class="bi bi-speedometer2 me-2"></i> Tableau de bord
                </a></li>
                {% elif user.role in 'admin,rh' %}
                <li><a class="dropdown-item" href="{% url 'dashboard-rh' %}">
                  <i class="bi bi-speedometer2 me-2"></i> Tableau de bord
                </a></li>
                {% endif %}
                
                <li><hr class="dropdown-divider"></li>
                <li><a class="dropdown-item text-danger" href="{% url 'logout' %}">
                  <i class="bi bi-box-arrow-right me-2"></i> Déconnexion
                </a></li>
              </ul>
            </li>
            {% else %}
            <!-- Utilisateur non connecté -->
            <li class="nav-item dropdown list-unstyled">
              <a class="nav-link btn btn-orange dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                Se connecter
              </a>
              <ul class="dropdown-menu dropdown-menu-end">
                <li><a class="dropdown-item" href="{% url 'login' %}" onclick="setLoginType('candidate')">
                    <i class="bi bi-person-vcard me-2"></i> Candidat
                </a></li>
                <li><hr class="dropdown-divider"></li>
                <li><a class="dropdown-item" href="{% url 'login' %}" onclick="setLoginType('company')">
                    <i class="bi bi-building me-2"></i> Entreprise
                </a></li>
                <li><hr class="dropdown-divider"></li>
                <li><a class="dropdown-item" href="{% url 'login' %}" onclick="setLoginType('employee')">
                    <i class="bi bi-person-badge me-2"></i> Consultant
                </a></li>
              </ul>
            </li>
            {% endif %}
          </ul>
        </div>
      </div>
    </div>
  </nav>

  <!-- Content -->
  <main class="flex-shrink-0">
    {% block content %}{% endblock %}
  </main>

  <!-- Footer -->
  <footer class="bg-primary-blue text-white py-5">
    <div class="container">
      <div class="row g-4">

        <!-- Logo + Description -->
        <div class="col-lg-3 col-md-6">
          <div class="d-flex flex-column h-100">
            <a href="#" class="mb-3">
              <img src="{% static 'site_web/images/hero/logo_antares_centre.png' %}" 
                   alt="Logo Antares " loading="lazy"
                   class="img-fluid" style="max-height: 80px;">
            </a>
            <p class="mb-3">Votre partenaire RH pour des solutions humaines innovantes et performantes.</p>
            <div class="mt-auto">
              <h5 class="h6 text-uppercase mb-3">Newsletter</h5>
              <form class="d-flex gap-2">
                <input type="email" class="form-control form-control-sm" placeholder="Votre email" required>
                <button type="submit" class="btn btn-sm" style="background-color: var(--accent-orange);">
                  <i class="bi bi-envelope-arrow-up"></i>
                </button>
              </form>
            </div>
          </div>
        </div>

        <!-- Liens rapides -->
        <div class="col-lg-2 col-md-6">
          <h5 class="h6 text-uppercase mb-3 border-bottom pb-2" style="border-color: rgba(255,255,255,0.1) !important;">Navigation</h5>
          <ul class="list-unstyled">
            <li class="mb-2"><a href="{% url 'home' %}" class="text-white text-decoration-none d-flex align-items-center link-hover">
              <i class="bi bi-chevron-right me-2 small"></i>Accueil
            </a></li>
            <li class="mb-2"><a href="{% url 'about' %}" class="text-white text-decoration-none d-flex align-items-center link-hover">
              <i class="bi bi-chevron-right me-2 small"></i>À propos
            </a></li>
            <li class="mb-2"><a href="{% url 'services' %}" class="text-white text-decoration-none d-flex align-items-center link-hover">
              <i class="bi bi-chevron-right me-2 small"></i>Services
            </a></li>
            <li class="mb-2"><a href="{% url 'jobs' %}" class="text-white text-decoration-none d-flex align-items-center link-hover">
              <i class="bi bi-chevron-right me-2 small"></i>Offres
            </a></li>
            <li><a href="{% url 'contact' %}" class="text-white text-decoration-none d-flex align-items-center link-hover">
              <i class="bi bi-chevron-right me-2 small"></i>Contact
            </a></li>
          </ul>
        </div>

        <!-- Espaces -->
        <div class="col-lg-2 col-md-6">
          <h5 class="h6 text-uppercase mb-3 border-bottom pb-2" style="border-color: rgba(255,255,255,0.1) !important;">Espaces</h5>
          <ul class="list-unstyled">
            <li class="mb-2">
              <a href="{% url 'login' %}?type=candidate" class="text-white text-decoration-none d-flex align-items-center link-hover">
                <i class="bi bi-person-vcard me-2" style="color: var(--accent-orange);"></i>Candidat
              </a>
            </li>
            <li class="mb-2">
              <a href="{% url 'login' %}?type=company" class="text-white text-decoration-none d-flex align-items-center link-hover">
                <i class="bi bi-building me-2" style="color: var(--accent-orange);"></i>Entreprise
              </a>
            </li>
            <li>
              <a href="{% url 'consultant-info' %}" class="text-white text-decoration-none d-flex align-items-center link-hover">
                <i class="bi bi-person-badge me-2" style="color: var(--accent-orange);"></i>Consultant 
              </a>
            </li>
          </ul>
          
          <h5 class="h6 text-uppercase mt-4 mb-3 border-bottom pb-2" style="border-color: rgba(255,255,255,0.1) !important;">Inscription</h5>
          <ul class="list-unstyled">
            <li class="mb-2">
              <a href="{% url 'candidate-registry' %}" class="text-white text-decoration-none d-flex align-items-center link-hover">
                <i class="bi bi-person-plus me-2" style="color: var(--accent-orange);"></i>Candidat
              </a>
            </li>
            <li>
              <a href="{% url 'entreprise-registry' %}" class="text-white text-decoration-none d-flex align-items-center link-hover">
                <i class="bi bi-building-add me-2" style="color: var(--accent-orange);"></i>Entreprise
              </a>
            </li>
          </ul>
        </div>

        <!-- Services -->
        <div class="col-lg-2 col-md-6">
          <h5 class="h6 text-uppercase mb-3 border-bottom pb-2" style="border-color: rgba(255,255,255,0.1) !important;">Nos services</h5>
          <ul class="list-unstyled">
            <li class="mb-2"><a href="{%url 'savoir-plus'%}" class="text-white text-decoration-none d-flex align-items-center link-hover">
              <i class="bi bi-check-circle me-2" style="color: var(--accent-orange);"></i>Recrutement
            </a></li>
            <li class="mb-2"><a href="{%url 'savoir-plus'%}" class="text-white text-decoration-none d-flex align-items-center link-hover">
              <i class="bi bi-check-circle me-2" style="color: var(--accent-orange);"></i>Formation
            </a></li>
            <li class="mb-2"><a href="{%url 'savoir-plus'%}" class="text-white text-decoration-none d-flex align-items-center link-hover">
              <i class="bi bi-check-circle me-2" style="color: var(--accent-orange);"></i>Gestion RH
            </a></li>
            <li><a href="{%url 'savoir-plus'%}" class="text-white text-decoration-none d-flex align-items-center link-hover">
              <i class="bi bi-check-circle me-2" style="color: var(--accent-orange);"></i>Conseil stratégique
            </a></li>
          </ul>
        </div>

        <!-- Contact & Réseaux -->
        <div class="col-lg-3 col-md-6">
          <h5 class="h6 text-uppercase mb-3 border-bottom pb-2" style="border-color: rgba(255,255,255,0.1) !important;">Contactez-nous</h5>
          <ul class="list-unstyled mb-4">
            <li class="mb-2"><i class="bi bi-geo-alt-fill me-2" style="color: var(--accent-orange);"></i> Bamako, Mali</li>
            <li class="mb-2"><i class="bi bi-telephone-fill me-2" style="color: var(--accent-orange);"></i> +223 20292040</li>
            <li><i class="bi bi-envelope-fill me-2" style="color: var(--accent-orange);"></i> info@antares-rh.com</li>
          </ul>
          
          <h5 class="h6 text-uppercase mb-3">Réseaux sociaux</h5>
          <div class="d-flex gap-3">
            <a href="https://facebook.com" class="social-icon" aria-label="Facebook">
              <i class="bi bi-facebook" aria-hidden="true"></i>
            </a>
            <a href="https://www.linkedin.com/company/antares-rh-mali/" class="social-icon">
              <i class="bi bi-linkedin"></i>
            </a>
            <a href="#" class="social-icon">
              <i class="bi bi-instagram"></i>
            </a>
          </div>
        </div>
      </div>

      <hr class="my-4" style="border-color: rgba(255,255,255,0.1);">

      <div class="row">
        <div class="col-md-6 text-center text-md-start mb-3 mb-md-0">
          <p class="small mb-0">&copy; 2025 Antarès RH. Tous droits réservés.</p>
        </div>
        <div class="col-md-6 text-center text-md-end">
          <p class="small mb-0">
            <a href="#" class="text-white text-decoration-none link-hover">Mentions légales</a> | 
            <a href="#" class="text-white text-decoration-none link-hover">Politique de confidentialité</a>
          </p>
        </div>
      </div>
    </div>
  </footer>

  <style>
    /* Effets hover */
    .link-hover {
      transition: all 0.3s ease;
      opacity: 0.8;
    }
    
    .link-hover:hover {
      opacity: 1;
      transform: translateX(5px);
      color: var(--accent-orange) !important;
    }
    
    .social-icon {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 36px;
      height: 36px;
      background-color: rgba(255,255,255,0.1);
      color: white;
      border-radius: 50%;
      transition: all 0.3s ease;
    }
    
    .social-icon:hover {
      background-color: var(--accent-orange);
      transform: translateY(-3px);
    }
    
    /* Amélioration du formulaire */
    footer input::placeholder {
      color: rgba(255,255,255,0.6);
    }
    
    footer input {
      background-color: rgba(255,255,255,0.1);
      border: 1px solid rgba(255,255,255,0.2);
      color: white;
    }
    
    footer input:focus {
      background-color: rgba(255,255,255,0.2);
      border-color: var(--accent-orange);
      box-shadow: 0 0 0 0.25rem rgba(244, 96, 54, 0.25);
    }
  </style>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  
  <script>
  // Stocke le type d'utilisateur dans sessionStorage
  function setLoginType(type) {
      sessionStorage.setItem('loginType', type);
      window.location.href = "{% url 'login' %}?type=" + type;
  }

  // Au chargement de la page, active le bon onglet
  document.addEventListener('DOMContentLoaded', function() {
      const urlParams = new URLSearchParams(window.location.search);
      const type = urlParams.get('type') || sessionStorage.getItem('loginType') || 'candidate';
      
      // Active le bon onglet Bootstrap
      if (type === 'company') {
          const tab = new bootstrap.Tab(document.getElementById('company-tab'));
          tab.show();
      } else if (type === 'employee') {
          const tab = new bootstrap.Tab(document.getElementById('employee-tab'));
          tab.show();
      }
      
      // Nettoie le sessionStorage après utilisation
      sessionStorage.removeItem('loginType');
  });
  </script>
</body>
</html>